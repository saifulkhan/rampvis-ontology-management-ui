<div class="main-content">
  <div class="container-fluid">

    <!-- Select VIS -->

    <div class="card">

      <div class="card-header card-header-primary card-header-icon">
        <div class="card-icon">
          <mat-icon>playlist_add</mat-icon>
        </div>
        <h4 class="card-title">Propagation</h4>
      </div>

      <div class="card-body">
        <div class="row">
          <div class="pull-left mt-1 col-md-3">
            <mat-form-field >
              <app-custom-single-selection
                [data]="ontoVisArr$ | async"
                placeholder="Select VIS function"
                placeholderLabel="Search VIS function..."
                (onSelectId)="onSelectOntoVis($event)"
              >
              </app-custom-single-selection>
            </mat-form-field>
          </div>
          <div class="pull-right mt-1 col-md-9">
            <!--Propagation button-->
            <button mat-raised-button class="btn btn-primary float-right" (click)="search()">Propagate</button>
          </div>
        </div>

        <!--Selected VIS table-->
        <app-onto-vis-table *ngIf="ontoVisArrLen" [data]="ontoVisArr" [len]="ontoVisArrLen"> </app-onto-vis-table>
      </div>
    </div>

    <!--Example data-->

    <div class="card" *ngIf="ontoVisArrLen">
      <div class="card-body">
        <app-onto-data-table *ngIf="ontoVisArrLen" [data]="ontoDataArr" [len]="ontoDataArrLen"> </app-onto-data-table>
      </div>
    </div>

    <!--Search data-->

    <div class="card" *ngIf="ontoVisArrLen">
      <div class="card-body">

        <div class="row">
          <div class="col-md-6 offset-md-2 d-flex">
            <mat-form-field class="col-md-3">
              <mat-select [(ngModel)]="dataType" placeholder="Data Type">
                <mat-option [value]="null"></mat-option>
                <mat-option *ngFor="let d of dataTypes" [value]="d">{{ d }}</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-divider [vertical]="true" class="divider"></mat-divider>

            <mat-form-field>
              <!-- <mat-icon matSuffix>search</mat-icon> -->
              <input
                matInput
                type="text"
                [(ngModel)]="searchQuery"
                [formControl]="searchForm"
                [matAutocomplete]="auto"
                placeholder="Search data streams"
                #input
                (keydown.enter)="search(input.value)"
              />
              <mat-autocomplete #auto="matAutocomplete" (optionSelected)="optionSelected(input)">
                <mat-option *ngFor="let d of suggestedList" [value]="d.description + ' ' + d.keywords.join(', ')">
                  <span [innerHTML]="d.description | highlight: toHighlight"></span> <b> | </b>
                  <span [innerHTML]="d.keywords.join(', ') | highlight: toHighlight"></span>
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>

          <button (click)="search()" class="btn btn-primary btn-round btn-fab float-right card-btn">
            <mat-icon>search</mat-icon>
          </button>

        </div>

        <div class="row">
          <div class="col-md-12">
            <app-onto-data-table
              *ngIf="ontoDataSearchResultLen > 0"
              [data]="ontoDataSearchResult"
              [len]="ontoDataSearchResultLen"
              (onClickEditOntoData)="onClickEdit($event)"
              (onClickDeleteOntoData)="onClickDelete($event)"
              (fetchOntoData)="getOntoData($event)"
            >
            </app-onto-data-table>
          </div>
        </div>

      </div>
    </div>

  </div> <!--container-fluid-->
</div> <!--main-content-->

