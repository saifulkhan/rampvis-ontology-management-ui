<div class="main-content">
  <div class="container-fluid">

    <div class="card">
      <div class="card-header card-header-primary card-header-icon">
        <div class="card-icon">
          <mat-icon>playlist_add</mat-icon>
        </div>
        <h4 class="card-title">
          Propagation - {{ filterPublishType$.value | titlecase }}
        </h4>
      </div>

      <div class="card-body">

        <!--select vis function-->

        <div class="row">
          <div class="col-md-3">

            <form [formGroup]='formGroup'>

              <mat-form-field>
                <app-custom-single-selection 
                [data]="visList$ | async"
                  formControlName="visId"
                  placeholder="Select VIS function"  
                  placeholderLabel="Search VIS function..."
                >
                </app-custom-single-selection>  
              </mat-form-field>
            </form>

            <pre>
              {{formGroup.value | json}}
            </pre> 
                
            <mat-form-field>
              <app-custom-single-selection 
                [data]="visList$ | async"
                placeholder="Select VIS function"
                placeholderLabel="Search VIS function..."
                (onSelectVis)="onSelectVisId($event)">
              </app-custom-single-selection>
            </mat-form-field>
          </div>

          <!--table vis function-->
        </div>

        <!--table example data binding-->

       
      </div>
      <!-- end content-->
    </div>
    <!--  end card  -->


    <div class="card">
      <!-- <div class="card-header card-header-primary card-header-icon">
        <div class="card-icon">
          <mat-icon>nat</mat-icon>
        </div>
      </div> -->

      <div class="card-body">
       
        <!--data stream search 1-->
        <mat-form-field class="search-form-field" appearance="standard">
          <mat-label>Search data streams</mat-label>
          <app-custom-form-field-control
            [required]="true"
            placeholder="Start to type..."
          ></app-custom-form-field-control>
        </mat-form-field>


        <!--data stream search 2-->
        <div class="row">

          <div class="col-md-9 offset-md-2 d-flex">
            <mat-form-field class="col-md-3">
              <mat-select [(ngModel)]="dataType" placeholder="Data Type">
                <mat-option [value]="null"></mat-option>
                <mat-option *ngFor="let d of dataTypes" [value]="d">{{d}}</mat-option>
              </mat-select>
            </mat-form-field>
            
            <!-- <mat-divider [vertical]="true" class="divider"></mat-divider> -->

            <mat-form-field class="col-md-9">
              <input
                matInput
                type="text"
                [(ngModel)]="searchQuery"
                [formControl]="searchForm"
                [matAutocomplete]="auto"
                placeholder="Search data product or stream"
                #input
              />
              <mat-autocomplete #auto="matAutocomplete" (optionSelected)="optionSelected(input)">
                <mat-option
                  *ngFor="let d of suggestedList"
                  [value]="d.streamDesc + ' ' + d.productDesc"
                >
                  <span [innerHTML]="d.streamDesc | highlight: toHighlight"></span> | 
                  <span [innerHTML]="d.productDesc | highlight: toHighlight"></span>
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>

            <button
              (click)="search()"
              class="btn btn-primary btn-round btn-fab float-right card-btn"
            >
              <mat-icon>search</mat-icon>
            </button>
          </div>
        </div>

        <!--propagation button-->

        <!-- <hr />

        <div>
          <button
            (click)="onClickCreate()"
            mat-raised-button
            class="btn btn-primary float-right"
          >
            Propagate
          </button>
        </div> -->

        <!-- <div class="toolbar">
              <mat-form-field class="pull-left mt-1 col-md-4">
                <input 
                  (keyup)="filterDataSource()" 
                  [(ngModel)]="searchTerm" 
                  matInput 
                  name="search" 
                  placeholder="Filter..." 
                  type="text" 
                />
              </mat-form-field> 
            </div> -->

            <!--
        <div>
          <table
            [dataSource]="tableDataSource"
            mat-table
            matSort
            matSortActive="created"
            matSortDirection="desc"
            matSortDisableClear="true"
          >
            <ng-container matColumnDef="id">
              <th *matHeaderCellDef mat-header-cell>Copy ID</th>
              <td *matCellDef="let row" mat-cell>
                <button
                  cdkCopyToClipboard="{{ row.id }}"
                  [matTooltipPosition]="'left'"
                  class="btn btn-light btn-link"
                  mat-icon-button
                  matTooltip="Copy to clipboard"
                  type="button"
                >
                  <mat-icon>content_copy</mat-icon>
                </button>
              </td>
            </ng-container>

            <ng-container matColumnDef="function">
              <th *matHeaderCellDef mat-header-cell mat-sort-header>
                Function
              </th>
              <td *matCellDef="let row" mat-cell>{{ row.function }}</td>
            </ng-container>

            <ng-container matColumnDef="type">
              <th *matHeaderCellDef mat-header-cell mat-sort-header>Type</th>
              <td *matCellDef="let row" mat-cell>
                <mat-chip-list>
                  <mat-chip *ngIf="row.type">{{ row.type }}</mat-chip>
                </mat-chip-list>
              </td>
            </ng-container>

            <ng-container matColumnDef="dataTypes">
              <th *matHeaderCellDef mat-header-cell>Data Types</th>
              <td *matCellDef="let row" mat-cell>
                <mat-chip-list>
                  <mat-chip *ngFor="let d of row.dataTypes">
                    {{ d }}
                  </mat-chip>
                </mat-chip-list>
              </td>
            </ng-container>

            <ng-container matColumnDef="description">
              <th *matHeaderCellDef mat-header-cell mat-sort-header>
                Description
              </th>
              <td *matCellDef="let row" mat-cell>{{ row.description }}</td>
            </ng-container>

            <ng-container matColumnDef="actions">
              <th *matHeaderCellDef class="text-center actions" mat-header-cell>
                Actions
              </th>
              <td
                *matCellDef="let row"
                class="td-actions text-center text-nowrap"
                mat-cell
              >
                <button
                  (click)="onClickEdit(row)"
                  [matTooltipPosition]="'left'"
                  class="btn btn-warning btn-link"
                  mat-icon-button
                  matTooltip="Edit row"
                  type="button"
                >
                  <mat-icon>edit</mat-icon>
                </button>

                <button
                  (click)="onClickDelete(row.id)"
                  [matTooltipPosition]="'left'"
                  class="btn btn-danger btn-link"
                  mat-icon-button
                  matTooltip="Remove row"
                  type="button"
                >
                  <mat-icon>close</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr *matHeaderRowDef="tableData.headerRow" mat-header-row></tr>
            <tr
              *matRowDef="let visList; columns: tableData.headerRow"
              mat-row
            ></tr>
          </table>

          <div *ngIf="spinner" class="spinner-background">
            <mat-progress-spinner
              class="progress-spinner-container"
              color="primary"
              diameter="100"
              mode="indeterminate"
            >
            </mat-progress-spinner>
          </div>
          <mat-paginator
            [length]="visList.length"
            [pageSizeOptions]="[50, 100, 150, 200]"
            [pageSize]="50"
            showFirstLastButtons
          >
          </mat-paginator>
        </div>

        !-->

        <!--end table-->

      </div>
      <!-- end content-->
    </div>
    <!--  end card  -->


  </div>
</div>
