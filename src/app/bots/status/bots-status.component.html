<div class="main-content">
  <div class="container-fluid">
    <div class="card">
      <div class="card-header card-header-primary card-header-icon">
        <div class="card-icon">
          <mat-icon>android</mat-icon>
        </div>
        <h4 class="card-title">Automated Bots</h4>
      </div>
      <div class="card-body">
        <!--status card-->
        <div class="card">
          <div class="card-header">
            <h5 class="card-title">Controls & Configuration</h5>
          </div>
          <div class="card-body">
            <div class="row">
              <!--col control buttons-->
              <div class="col-md-1 my-auto">
                <div class="row justify-content-center">
                  <button 
                    *ngIf="schedulerStatus === 'state_stopped'" 
                    class="btn btn-primary control-btn btn-sm" 
                    (click)="start()"
                  >
                    START
                  </button>
                  <button
                    *ngIf="schedulerStatus !== 'state_stopped'"
                    class="btn btn-success control-btn btn-sm"
                    [disabled]="schedulerStatus === 'state_running'"
                    (click)="resume()"
                  >
                    RESUME
                  </button>
                </div>
                <div class="row justify-content-center">
                  <button 
                    class="btn btn-warning control-btn btn-sm" 
                    [disabled]="schedulerStatus === 'state_paused'" 
                    (click)="pause()"
                  >
                    PAUSE
                  </button>
                </div>
              </div>
              <!--col control buttons-->

              <!--col status-->
              <div class="col-md-2 my-auto">
                <h5 *ngIf="schedulerStatus === 'state_stopped'" class="text-danger">STOPPED</h5>
                <h5 *ngIf="schedulerStatus === 'state_running'" class="text-success">RUNNING</h5>
                <h5 *ngIf="schedulerStatus === 'state_paused'" class="text-warning">PAUSED</h5>
              </div>
              <!--col status-->

              <!--col configuration table-->
              <div class="col-md-9">
                <table mat-table [dataSource]="[settings]">
                  <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef>Variable Name</th>
                    <td mat-cell *matCellDef="let element">Setting</td>
                  </ng-container>
                  <ng-container matColumnDef="p1">
                    <th mat-header-cell *matHeaderCellDef>P1</th>
                    <td mat-cell *matCellDef="let element">{{ element.schedulerIntervals.p1 }}</td>
                  </ng-container>
                  <ng-container matColumnDef="p2">
                    <th mat-header-cell *matHeaderCellDef>P2</th>
                    <td mat-cell *matCellDef="let element">{{ element.schedulerIntervals.p2 }}</td>
                  </ng-container>
                  <ng-container matColumnDef="p3">
                    <th mat-header-cell *matHeaderCellDef>P3</th>
                    <td mat-cell *matCellDef="let element">{{ element.schedulerIntervals.p3 }}</td>
                  </ng-container>
                  <ng-container matColumnDef="default">
                    <th mat-header-cell *matHeaderCellDef>Default</th>
                    <td mat-cell *matCellDef="let element">{{ element.schedulerIntervals.def }}</td>
                  </ng-container>

                  <ng-container matColumnDef="threads">
                    <th mat-header-cell *matHeaderCellDef>Threads</th>
                    <td mat-cell *matCellDef="let element">{{ element.threads }}</td>
                  </ng-container>
                  <ng-container matColumnDef="edit">
                    <th mat-header-cell *matHeaderCellDef>Edit</th>
                    <td mat-cell *matCellDef="let element">
                      <button 
                        mat-icon-button 
                        class="btn btn-warning btn-link" 
                        mat-icon-button matTooltip="Edit" 
                        type="button" 
                        (click)="editBotSettings()"
                      >
                        <mat-icon>edit</mat-icon>
                      </button>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                </table>
              </div>
              <!--col configuration table-->
            </div>
          </div>
        </div>
        <!-- status card -->

        <div class="card">
          <div class="card-header">
            <h5 class="card-title">Logs</h5>
          </div>
          <div class="card-body">
            <log-monitor [logStream]="logStream$ | async" style="margin: 5px" theme="light"></log-monitor>
          </div>
        </div>
        <!--Log card-->
      </div>
      <!--  end card  -->
    </div>
  </div>
</div>
